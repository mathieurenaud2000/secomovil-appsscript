  <style>
    :root{
      --fix: 1;
      --gap: 12px;
      --radius: 40px;
      --font-label: 12px;
      --font-small: 14px;
      --font-body: 15px;
      --btn-fs: 16px;
      --btn-ph: 14px;
      --btn-pw: 18px;
      --btn-minh: 48px;
      --black: #000;
      --white: #fff;
      --gray10: rgba(0,0,0,0.10);
      --gray15: rgba(0,0,0,0.15);
      --gray20: rgba(0,0,0,0.20);
      --gray25: rgba(0,0,0,0.25);
      --gray40: rgba(0,0,0,0.40);
    }

    html, body{
      margin:0; padding:0;
      width:100%; max-width:100%;
      overflow-x:hidden; box-sizing:border-box;
      background:#fff;
      font-family: Roboto, system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
    }
    *, *::before, *::after{ box-sizing:inherit; }
    *:focus{ outline:none!important; box-shadow:none!important; }

    .wrapper{ padding: 0 50px; }

    /* ===== ENTÊTE SECONDAIRE ===== */
    .header{ display:block; margin: calc(var(--gap) * var(--fix)) 0; }
    .header-logo{ display:block; width:100%; line-height:0; margin:0; }
    .header-img{
      display:block; width:100%; height:auto;
      object-fit:contain; object-position:left center;
      margin:0 8px 15px 0;
      padding-bottom:30px;
    }

    .sep-black{ height:0; border-top: 5px solid var(--black); }
    .sep-black--padded{ padding:12px 0; }
    .sep-gray { height:0; border-top: 2px solid var(--gray20); margin-top: calc(5px * var(--fix)); }
    #finalSeparator{
      border-top: 2px solid var(--gray20);
      padding-top:12px;
      padding-bottom:12px;
    }

    .header-grid{
      display:grid; grid-template-columns: 1fr;
      align-items:end;
      gap: calc(8px * var(--fix));
      padding: calc(12px * var(--fix)) 0 0 0;
    }
    .header-title{
      text-transform: uppercase; font-weight: 900;
      font-size: calc(21px * var(--fix));
      line-height: calc(20px * var(--fix));
    }
    .header-title span{ display:block; }

    /* ===== ONGLET TODO / PENDIENTE ===== */
    .tabs{
      display:grid;
      grid-template-columns: 40% 60%;
      margin: calc(var(--gap) * var(--fix)) 0 calc(var(--gap) * var(--fix) + 25px);
    }
    .tab{
      display:flex;
      align-items:center;
      justify-content:center;
      text-transform:uppercase;
      font-weight:700;
      font-size: calc(var(--font-body) * var(--fix) + 2px);
      padding: calc(10px * var(--fix)) 0;
      background:#fff;
      cursor:pointer;
      border:0;
      border-bottom:3px solid #000;
      color:#000;
    }
    .tab[aria-selected="true"]{
      border-top:3px solid #000;
      border-left:3px solid #000;
      border-right:3px solid #000;
      border-bottom:0;
    }

    /* ===== BOUTONS GLOBAUX ===== */
    .btn{ 
      display:block; width:100%;
      text-transform:uppercase; font-weight:700;
      font-size: calc(var(--btn-fs) * var(--fix)); line-height:1.2;
      padding: calc(var(--btn-ph) * var(--fix)) calc(var(--btn-pw) * var(--fix));
      min-height: calc(var(--btn-minh) * var(--fix));
      border-radius: var(--radius);
      border: 5px solid transparent; cursor:pointer;
      transition: filter .15s ease;
    }
    .btn:active{ filter:brightness(0.95); }
    .btn-noir{
      background:#000; color:#fff; border-color:#000;
      box-shadow:0 20px 40px rgba(0,0,0,0.40);
    }
    .btn-blanc{
      background:#fff; color:#000; border-color: var(--gray20);
    }
    .btn-blanc:active{
      color: rgba(0,0,0,0.5);
    }

    .stack{
      display:flex; flex-direction:column;
      gap:0;
    }

    .pedido-separator{
      height:0;
      border-top: 2px solid var(--gray20);
      margin: calc((var(--gap) * var(--fix)) / 2 + 10px) 0 calc((var(--gap) * var(--fix)) / 2) 0;
      padding: 12px 0;
    }

    .txt-mini{
      font-size: calc(var(--font-label) * var(--fix));
      color:#222;
    }
    .txt-body{
      font-size: calc(var(--font-body) * var(--fix));
      color:#111;
    }

    /* ===== CARTE PEDIDO ===== */
    .pedido-card{
      background:#fff;
      border:5px solid #fff;      /* bordure blanche constante pour éviter le saut */
      border-radius: var(--radius);
      box-shadow:none;
      padding:0 0 10px 0;
      margin:0;
      display:flex;
      flex-direction:column;
      position:relative;
      transition: background .15s ease, border-color .15s ease, box-shadow .15s ease, color .15s ease;
    }

    .pedido-main{
      display:flex;
      flex-direction:column;
    }

    /* Ligne 1 : heure + secteur / flèche ou icône */
    .pedido-row1{
      display:grid;
      grid-template-columns: auto 1fr;
      align-items:center;
      padding: 0 0 calc(5px * var(--fix)) 0;
    }
    .pedido-topline{
      font-size: calc(var(--font-label) * var(--fix));
      color:#111;
      padding:0;
      white-space:nowrap;
    }
    .pedido-row1 .pedido-toggle{
      justify-self:end;
    }

    /* Ligne 2 : nom + direction + note */
    .pedido-row2{
      padding:0;
    }
    .pedido-row2 .pedido-left{
      padding-right:25px;
    }
    .pedido-row2 .pedido-left{
      display:flex;
      flex-direction:column;
      gap: calc(2px * var(--fix));
      margin-right: 40px;
    }

    .pedido-nom{
      font-weight:700;
      text-transform:uppercase;
      font-size: calc(var(--font-small) * var(--fix));
    }
    .pedido-ligne,
    .pedido-note{
      font-size: calc(var(--font-label) * var(--fix));
      line-height:1.2;
    }

    /* Ligne 3 : quantité/prix + cellule de statut */
    .pedido-row3{
      display:grid;
      grid-template-columns: auto 1fr;
      align-items:center;
      padding:0;
    }
    /* Padding haut uniquement sur la première colonne (quantité/prix) */
    .pedido-row3 > .pedido-left{
      padding-top: calc(10px * var(--fix));
    }
    .pedido-total{
      font-size: calc(var(--font-label) * var(--fix));
    }
    .pedido-total b{ font-weight:700; }

    .pedido-statuscell{
      display:flex;
      align-items:flex-end; /* icône collée en bas */
      justify-content:flex-end;
      gap: calc(6px * var(--fix));
      padding:0;
      background:#fff;      /* fond blanc forcé dans tous les états */
    }

    .pedido-statuscell .pedido-note{
      display:none;
    }

    /* Flèche accordéon */
    .pedido-toggle{
      border:0; background:transparent; padding:0;
      width: calc(24px * var(--fix)); height: calc(24px * var(--fix));
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      transition: opacity .15s ease;
    }
    .chevron{
      width:0; height:0;
      border-left: calc(6px * var(--fix)) solid transparent;
      border-right: calc(6px * var(--fix)) solid transparent;
      border-top: calc(6px * var(--fix)) solid #000;
      transition: transform .15s ease, border-top-color .15s ease;
    }
    .pedido-card.is-open .chevron{
      transform: rotate(180deg);
    }

    /* Icônes de statut (ligne 1 col. 2, en absolu) */
    .pedido-status-icon{
      width: calc(22px * var(--fix));
      height: calc(22px * var(--fix));
      display:none;
      position:absolute;
      top:0;
      right:0;
    }
    .pedido-status-icon img{
      display:block; width:100%; height:auto; object-fit:contain;
    }

    .pedido-card.is-deleted .pedido-status--deleted img{
      opacity:0.25;
    }
    .pedido-card.is-cancelado .pedido-status--deleted img{
      opacity:0.15;
    }

    .pedido-refresh{
      width: calc(22px * var(--fix));
      height: calc(22px * var(--fix));
      display:none;
      cursor:pointer;
      background:#fff;
    }
    .pedido-refresh img{
      display:block; width:100%; height:auto; object-fit:contain;
    }

    .pedido-card.is-deleted .pedido-refresh img,
    .pedido-card.is-delivered .pedido-refresh img{
      content: url('https://lh3.googleusercontent.com/d/1rTlZ9aSk3_ay4lGH8EO3LOoHXk7f89Tq');
    }

    .pedido-card.is-reactivating .pedido-status-icon,
    .pedido-card.is-reactivating .pedido-refresh{
      visibility:hidden;
      pointer-events:none;
    }

    .pedido-card.is-deleted .pedido-status--deleted,
    .pedido-card.is-delivered .pedido-status--delivered{
      display:block;
    }
    .pedido-card.is-deleted .pedido-refresh,
    .pedido-card.is-delivered .pedido-refresh{
      display:block;
    }

    /* Ligne 4 : accordéon (3 boutons pleine largeur) */
    .pedido-actions{
      display:none;
      margin:0;                 /* pas de marge bas, on gère seulement le haut à l'ouverture */
      border-radius:0;
      overflow:hidden;
      box-shadow:none;
      border:3px solid #000;
    }
    .pedido-card.is-open:not(.is-deleted):not(.is-delivered) .pedido-actions{
      display:flex;
      margin-top: calc(18px * var(--fix));  /* 8 px de base + 10 px ajoutés */
    }
    .pedido-actions button{
      flex:1 1 33.3333%;
      border:0;
      padding: calc(7px * var(--fix)) 0;
      background:#fff;
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      border-radius:0;
    }
    .pedido-actions button + button{
      border-left:2px solid #000;
    }
    .pedido-actions img{
      display:block;
      width: calc(15px * var(--fix));
      height:auto;
      object-fit:contain;
    }
    .pedido-actions .btn-deliver{
      background:#000;
      position:relative;
    }
    .pedido-actions .btn-deliver img{
      width: calc(15px * var(--fix));
    }
    .pedido-actions .btn-deliver[data-spinner="1"]{
      color:transparent!important;
    }
    .pedido-actions .btn-deliver[data-spinner="1"] > *{ visibility:hidden; }
    .pedido-actions .btn-deliver[data-spinner="1"]::before{
      content:"";
      position:absolute;
      inset:0;
      margin:auto;
      width: calc(15px * var(--fix));
      height: calc(15px * var(--fix));
      border-radius:50%;
      border: calc(6px * var(--fix)) solid rgba(255,255,255,0.35);
      border-top-color:#fff;
      animation: btnNoirSpin 0.9s linear infinite;
      pointer-events:none;
    }
    .pedido-actions .btn-cancel{
      position:relative;
    }
    .pedido-actions .btn-cancel[data-spinner="1"]{
      color:transparent!important;
    }
    .pedido-actions .btn-cancel[data-spinner="1"] > *{ visibility:hidden; }
    .pedido-actions .btn-cancel[data-spinner="1"]::before{
      content:"";
      position:absolute;
      inset:0;
      margin:auto;
      width: calc(15px * var(--fix));
      height: calc(15px * var(--fix));
      border-radius:50%;
      border: calc(6px * var(--fix)) solid rgba(0,0,0,0.25);
      border-top-color:#000;
      animation: btnNoirSpin 0.9s linear infinite;
      pointer-events:none;
    }

    /* États supprimé / livré : fond blanc, texte gris pâle, icônes couleur originale */
    .pedido-card.is-deleted,
    .pedido-card.is-delivered{
      background:#fff;
      border-color:#fff;
      box-shadow:none;
    }
    .pedido-card.is-deleted .pedido-left,
    .pedido-card.is-deleted .pedido-left *,
    .pedido-card.is-deleted .pedido-topline,
    .pedido-card.is-delivered .pedido-left,
    .pedido-card.is-delivered .pedido-left *,
    .pedido-card.is-delivered .pedido-topline{
      color: var(--gray25) !important;
    }

    /* flèche invisible mais espace conservé en supprimé / livré */
    .pedido-card.is-deleted .pedido-toggle,
    .pedido-card.is-delivered .pedido-toggle{
      opacity:0;
      pointer-events:none;
    }

    /* Carte REACTIVÉE (temporaire, overlay) */
    .pedido-transition{
      position:absolute;
      inset:0;
      display:none;
      align-items:center;        /* CORRECTION : centrage horizontal */
      justify-content:center;    /* centrage vertical */
      flex-direction:column;
      text-align:center;
      pointer-events:none;
      border:0;
      border-radius:0;
      width:100%;
      height:100%;
      z-index:3;
    }
    .pedido-transition.pedido-transition-overlay{
      opacity:1;
      transition: opacity var(--pedido-transition-fade-ms, 100ms) ease;
    }
    .pedido-transition-overlay.is-fading-out{
      opacity:0;
      transition: opacity var(--pedido-transition-fade-ms, 100ms) ease;
    }
    .pedido-transition img{
      display:block;
      width: calc(56px * var(--fix));          /* plus petit qu’avant selon ta demande précédente */
      height:auto;
      object-fit:contain;
      margin-bottom: calc(4px * var(--fix));   /* espace réduit */
    }
    .pedido-transition .txt-body{
      font-weight:500;
      font-size: calc((var(--font-body) - 2px) * var(--fix));
    }

    /* État de réactivation : bordure noire, shadow, texte + flèche blancs */
    .pedido-card.is-reactivating,
    .pedido-card.is-canceling{
      background:#fff;
      border-color:#fff;
      box-shadow:none;
    }
    .pedido-card.is-reactivating .pedido-left,
    .pedido-card.is-reactivating .pedido-left *,
    .pedido-card.is-reactivating .pedido-topline,
    .pedido-card.is-canceling .pedido-left,
    .pedido-card.is-canceling .pedido-left *,
    .pedido-card.is-canceling .pedido-topline{
      color:#000 !important;
    }
    .pedido-card.is-reactivating .chevron,
    .pedido-card.is-canceling .chevron{
      border-top-color:#000;
    }
    .pedido-card.is-reactivating .pedido-transition{
      display:flex;
      background:#fff;
      color:#000;
      border:1px solid #fff;
      border-radius:1px;
    }
    .pedido-card.is-canceling .pedido-transition{
      display:flex;
      background:#fff;
      color:#000;
      border:10px solid #fff;
      border-radius:1px;
    }

    #btnVolverInicio{
      margin-top: 25px;
    }

    .footer-spacer{
      height: calc(24px * var(--fix));
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- ENTÊTE -->
    <header class="header">
      <div class="header-logo">
        <img class="header-img" id="headerImg"
             src="https://lh3.googleusercontent.com/d/15N5N0TgMBTxmn2v-sKsG53mEAKaxXYtA"
             alt="Logo SecoMobil">
      </div>

      <div class="sep-black"></div>

      <div class="header-grid">
        <div class="header-title">
          <span>PEDIDOS</span>
          <span>DEL DIA</span>
        </div>
      </div>
    </header>

    <!-- ONGLET TODO / PENDIENTE -->
    <nav class="tabs" aria-label="Filtres de commandes">
      <button class="tab" aria-selected="true">TODO</button>
      <button class="tab" aria-selected="false">PENDIENTE</button>
    </nav>

    <!-- LISTE DES CARTES -->
    <div class="stack" id="cardsContainer"></div>

    <div class="sep-gray" id="finalSeparator" aria-hidden="true"></div>

    <button class="btn btn-blanc" id="btnVolverInicio" data-role="volver-inicio">VOLVER AL INICIO</button>
    <div class="footer-spacer"></div>
  </div>
